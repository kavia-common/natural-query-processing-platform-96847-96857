{"is_source_file": true, "format": "JavaScript (React hook)", "description": "This file defines a custom React hook `useAuthProvider` that manages authentication state using localStorage and React's `useSyncExternalStore`. It provides methods to set and clear JWT tokens and listens for storage events to handle cross-tab updates.", "external_files": ["../api/client"], "external_methods": ["setToken as persistToken", "clearToken as removeToken"], "published": ["useAuthProvider"], "classes": [], "methods": [{"name": "useAuthProvider()", "description": "Custom React hook that provides authentication state (`token`, `isAuthenticated`) and methods to update or clear the token (`setToken`, `logout`). It synchronizes with localStorage and reacts to storage events for cross-tab updates.", "scope": "", "scopeKind": ""}, {"name": "getServerSnapshot()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "getSnapshot()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "subscribe(callback)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["useSyncExternalStore(subscribe, getSnapshot, getServerSnapshot)", "persistToken(newToken)", "removeToken()", "window.dispatchEvent(new StorageEvent('storage', { key: STORAGE_KEY }))", "window.addEventListener('storage', callback)", "window.removeEventListener('storage', callback)"], "search-terms": ["useAuthProvider", "localStorage token management", "JWT token React hook", "cross-tab auth sync", "useSyncExternalStore", "storage event listener"], "state": 2, "file_id": 14, "knowledge_revision": 33, "git_revision": "", "ctags": [{"_type": "tag", "name": "STORAGE_KEY", "path": "/home/kavia/workspace/code-generation/natural-query-processing-platform-96847-96857/dsp_frontend/src/hooks/useAuth.js", "pattern": "/^const STORAGE_KEY = 'jwt_token';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "getServerSnapshot", "path": "/home/kavia/workspace/code-generation/natural-query-processing-platform-96847-96857/dsp_frontend/src/hooks/useAuth.js", "pattern": "/^function getServerSnapshot() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getSnapshot", "path": "/home/kavia/workspace/code-generation/natural-query-processing-platform-96847-96857/dsp_frontend/src/hooks/useAuth.js", "pattern": "/^function getSnapshot() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "subscribe", "path": "/home/kavia/workspace/code-generation/natural-query-processing-platform-96847-96857/dsp_frontend/src/hooks/useAuth.js", "pattern": "/^function subscribe(callback) {$/", "language": "JavaScript", "kind": "function", "signature": "(callback)"}, {"_type": "tag", "name": "useAuthProvider", "path": "/home/kavia/workspace/code-generation/natural-query-processing-platform-96847-96857/dsp_frontend/src/hooks/useAuth.js", "pattern": "/^export function useAuthProvider() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}], "hash": "bf8b32709f28e561a33c6cfc169b8b5f", "format-version": 4, "code-base-name": "dsp_frontend", "filename": "dsp_frontend/src/hooks/useAuth.js", "revision_history": [{"33": ""}]}